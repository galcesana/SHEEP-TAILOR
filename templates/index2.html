<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CV Tailor</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        /* Apply background image to the body */
        body {
            background-image: url('/static/images/background.png');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            background-attachment: fixed;
            color: #333;
            font-family: 'Roboto', sans-serif;
        }

        /* Container styling */
        .container {
            width: 100%;
            max-width: 600px;
            padding: 2rem;
            background: linear-gradient(145deg, #ffffff, #f0f0f0);
            border-radius: 16px;
            box-shadow: 0 12px 35px rgba(0, 0, 0, 0.15);
            text-align: center;
            margin: 3rem auto;
            transition: transform 0.3s ease;
        }

        .container:hover {
            transform: scale(1.03);
        }

        h1 {
            font-size: 2rem;
            font-weight: 700;
            color: #1a1a2e;
            margin-bottom: 1rem;
        }

        .subheading {
            font-size: 1rem;
            color: #666;
            margin-bottom: 2rem;
        }

        /* Form group styling */
        .form-group {
            display: flex;
            align-items: center;
            margin-bottom: 1.5rem;
            border: 2px solid #ddd;
            border-radius: 12px;
            padding: 0.8rem;
            background-color: #f7f7f7;
            transition: border-color 0.2s ease;
        }

        .form-group:hover,
        .form-group:focus-within {
            border-color: #4c6ef5;
        }

        .icon {
            font-size: 1.5rem;
            color: #4c6ef5;
            margin-right: 0.8rem;
        }

        input[type="file"],
        textarea {
            width: 100%;
            border: none;
            font-size: 1rem;
            outline: none;
            background: none;
            font-family: 'Roboto', sans-serif;
        }

        textarea {
            padding: 0.8rem;
            resize: vertical;
            border: 2px solid #ddd;
            border-radius: 12px;
            background-color: #f7f7f7;
            margin-bottom: 1rem;
        }

        textarea:focus {
            border-color: #4c6ef5;
        }

        /* Button styling */
        button {
            width: 100%;
            padding: 0.9rem;
            margin-top: 1rem;
            font-size: 1rem;
            font-weight: 600;
            color: #fff;
            background-color: #4c6ef5;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.2s ease;
            box-shadow: 0 6px 20px rgba(76, 110, 245, 0.4);
        }

        button:hover {
            background-color: #3b5bdb;
            transform: translateY(-2px);
        }

        /* Loading spinner */
        #loading-spinner {
            display: none;
            font-size: 1rem;
            color: #4c6ef5;
            font-weight: 500;
            margin-top: 1rem;
        }

        /* "Generate New Resume" button */
        #new-resume-button {
            display: none;
            padding: 0.9rem 2rem;
            font-size: 1rem;
            font-weight: 600;
            color: #4c6ef5;
            background-color: #fff;
            border: 2px solid #4c6ef5;
            border-radius: 12px;
            cursor: pointer;
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        #new-resume-button:hover {
            background-color: #4c6ef5;
            color: #fff;
        }

        /* About Us Section */
        .about-section {
            max-width: 800px;
            padding: 2rem;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 16px;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.1);
            margin: 3rem auto;
            text-align: left;
        }

        .about-section h2 {
            color: #4c6ef5;
            margin-bottom: 1rem;
        }

        .about-section p {
            font-size: 1rem;
            line-height: 1.6;
            color: #555;
            margin-bottom: 1.2rem;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Tailor Your Resume</h1>
        <p class="subheading">Crafted specifically for your dream role</p>

        <form id="resume-form" enctype="multipart/form-data">
            <div class="form-group">
                <span class="icon">ðŸ“„</span>
                <input type="file" id="resume" name="resume" accept=".pdf,.docx,.txt" required>
            </div>

            <label for="job-description" style="text-align:left; display:block; margin-bottom:0.5rem; color:#555;">Job Description</label>
            <textarea id="job-description" name="job_description" rows="6" placeholder="Enter the job description..." required></textarea>

            <button type="button" onclick="submitForm()">Generate Tailored Resume</button>
        </form>

        <!-- Loading spinner -->
        <div id="loading-spinner">Generating your tailored resume...</div>

        <!-- "Generate New Resume" button -->
        <button id="new-resume-button" onclick="reloadPage()">Generate New Resume</button>
    </div>

    <!-- About Us Section -->
    <div class="about-section">
        <h2>About Us</h2>
        <p>Welcome to <strong>CV Tailor</strong>, where innovation meets personalization. We are passionate about helping job seekers like you make their best first impression. Our mission is to simplify the resume customization process, ensuring your skills and experience stand out to potential employers.</p>
        <p><strong>Who We Are</strong></p>
        <p>At <strong>CV Tailor</strong>, we are a team of tech enthusiasts, HR professionals, and career experts who understand the competitive nature of todayâ€™s job market. We leverage cutting-edge technology and industry knowledge to transform your existing resume into a tailored document that aligns seamlessly with any job description you provide.</p>
        <p><strong>What We Do</strong></p>
        <p>Our platform uses advanced algorithms and AI-driven tools to analyze job descriptions and adapt your resume to showcase the most relevant skills and experiences. Whether youâ€™re applying for your first job, making a career change, or aiming for that next-level position, we make your resume a powerful tool that reflects your true potential.</p>
        <p><strong>Our Promise</strong></p>
        <p>We believe in empowering individuals to achieve their career goals by simplifying the resume-writing process. Our services are designed to be user-friendly, efficient, and highly customizable, allowing you to focus on what matters mostâ€”your job search and career growth.</p>
        <p>Join thousands of satisfied users who have already discovered the ease and effectiveness of tailored resumes. At <strong>CV Tailor</strong>, weâ€™re here to help you stand out in the crowd and land your dream job.</p>
        <p><strong>Connect with Us</strong></p>
        <p>Weâ€™re more than just a service; weâ€™re your partners in career success. If you have any questions, feedback, or want to learn more about how we can help, donâ€™t hesitate to reach out. Your journey to a standout resume starts here.</p>
    </div>

    <script>
        async function submitForm() {
            const form = document.getElementById('resume-form');
            const formData = new FormData(form);
            const loadingSpinner = document.getElementById('loading-spinner');
            const newResumeButton = document.getElementById('new-resume-button');

            // Show loading spinner and hide the form
            loadingSpinner.style.display = 'block';
            form.style.display = 'none';

            try {
                const response = await fetch('/process_resume', {
                    method: 'POST',
                    body: formData
                });

                if (response.ok) {
                    const blob = await response.blob();
                    const url = window.URL.createObjectURL(blob);
                    const link = document.createElement('a');
                    link.href = url;
                    link.download = 'tailored_resume.pdf';
                    link.click();
                    window.URL.revokeObjectURL(url); // Free memory

                    // Show the "Generate New Resume" button
                    newResumeButton.style.display = 'block';
                } else {
                    alert('Error generating resume.');
                }
            } catch (error) {
                console.error('Error:', error);
                alert('An error occurred while processing the resume.');
            } finally {
                // Hide loading spinner if there's an error
                loadingSpinner.style.display = 'none';
            }
        }

        function reloadPage() {
            window.location.reload();
        }
    </script>
</body>
</html>
